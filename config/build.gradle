plugins{
    id 'jacoco-report-aggregation'
    id 'org.sonarqube' version '6.2.0.5505'
}

dependencies {
    implementation project(':api')
    implementation project(':core')
}

check {
    dependsOn testCodeCoverageReport
}

sonar {
    properties {
        property("sonar.coverage.jacoco.xmlReportPaths",
                layout.buildDirectory.file("reports/jacoco/testCodeCoverageReport/testCodeCoverageReport.xml").get().asFile.absolutePath
        )
    }
}

tasks.named('sonar') {
    dependsOn testCodeCoverageReport
}